@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix celine: <https://celine-eu.github.io/ontologies/celine#> .
@prefix prov: <http://www.w3.org/ns/prov#> .

#################################################################
# SHACL Shapes for CELINE core entities used by the REC registry
#################################################################

celine:EnergyCommunityShape a sh:NodeShape ;
  sh:targetClass celine:EnergyCommunity ;
  sh:property [
    sh:path <http://www.w3.org/2000/01/rdf-schema#label> ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path celine:hasMembership ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] .

celine:ParticipantShape a sh:NodeShape ;
  sh:targetClass celine:Participant ;
  sh:property [
    sh:path <http://www.w3.org/2000/01/rdf-schema#label> ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path celine:authURI ;
    sh:minCount 1 ;
    sh:datatype xsd:anyURI ;
  ] .

celine:MembershipShape a sh:NodeShape ;
  sh:targetClass celine:Membership ;
  sh:property [
    sh:path celine:membershipCommunity ;
    sh:minCount 1 ;
    sh:class celine:EnergyCommunity ;
  ] ;
  sh:property [
    sh:path celine:membershipParticipant ;
    sh:minCount 1 ;
    sh:class celine:Participant ;
  ] ;
  sh:property [
    sh:path celine:membershipRole ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
    sh:in ( "operator" "prosumer" "consumer" ) ;
  ] .

celine:SiteShape a sh:NodeShape ;
  sh:targetClass celine:Site ;
  sh:property [
    sh:path <http://www.w3.org/2000/01/rdf-schema#label> ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path celine:geoJSON ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
    sh:description "GeoJSON string literal (if you store structured GeoJSON, serialize to JSON string for RDF)." ;
  ] .

celine:AssetShape a sh:NodeShape ;
  sh:targetClass celine:Asset ;
  sh:property [
    sh:path <http://www.w3.org/2000/01/rdf-schema#label> ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path celine:locatedAt ;
    sh:minCount 0 ;
    sh:class celine:Site ;
  ] ;
  sh:property [
    sh:path celine:isOwnedBy ;
    sh:minCount 0 ;
    sh:class celine:Participant ;
  ] ;
  sh:property [
    sh:path celine:geoJSON ;
    sh:minCount 0 ;
    sh:datatype xsd:string ;
  ] .

celine:MeterShape a sh:NodeShape ;
  sh:targetClass celine:Meter ;
  sh:property [
    sh:path celine:sensorId ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path celine:isOwnedBy ;
    sh:minCount 1 ;
    sh:class celine:Participant ;
  ] ;
  sh:property [
    sh:path celine:connectedTo ;
    sh:minCount 0 ;
    sh:nodeKind sh:IRI ;
  ] .

celine:TimeSeriesShape a sh:NodeShape ;
  sh:targetClass celine:TimeSeries ;
  sh:property [
    sh:path celine:datasetURI ;
    sh:minCount 1 ;
    sh:datatype xsd:anyURI ;
  ] ;
  sh:property [
    sh:path celine:metric ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path celine:unit ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
  ] ;
  sh:property [
    sh:path celine:observedEntity ;
    sh:minCount 1 ;
    sh:nodeKind sh:IRI ;
  ] .
